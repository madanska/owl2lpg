<!doctype html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>OWL2LPG Draft Specification</title>
  <link rel="stylesheet" href="css/w3c-rec.css">
  <link rel="stylesheet" href="css/custom.css">
 </head>
 <body class="h-entry">
  <div class="head">
   <h1 id="title">Draft Specification: Conversion of OWL 2 EL Ontologies to Labeled Property Graphs</h1>
   <h2 id="subtitle">Working Draft, Updated: <time class="dt-updated" datetime="2020-02-27">27 February 2020</time></h2>
   <div>
    <dl>
     <dt>Feedback:
     <dd><a href="mailto:rafael.goncalves@stanford.edu">rafael.goncalves@stanford.edu</a>
     <dt>Document Source Control:
     <dd><a href="https://github.com/protegeproject/owl2lpg/" target="_blank">GitHub</a> (in branch: <a href="https://github.com/protegeproject/owl2lpg/tree/gh-pages" target="_blank">gh-pages</a>)
     <dt>Issue Tracking:
     <dd><a href="https://github.com/protegeproject/owl2lpg/issues/" target="_blank">GitHub</a>
     <dt>Editors:
     <dd><a href="https://rsgoncalves.com/" target="_blank">Rafael Gonçalves</a> (Stanford University)
     <dd><a href="https://web.stanford.edu/~horridge/" target="_blank">Matthew Horridge</a> (Stanford University)
     <dt>Contributors:     
     <dd><a href="mailto:alexander.garcia-castro@basf.com">Alexander García Castro</a> (BASF)
     <dd><a href="mailto:jose-antonio.bernabe-diaz@basf.com">José Antonio Bernabé Díaz</a> (BASF)
     <dd><a href="mailto:juergen.a.mueller@basf.com">Juergen Mueller</a> (BASF)
    </dl>
   </div>
   <div></div>
   <hr title="Separator for header">
  </div>
  <h2 id="abstract">Abstract</h2>
  <div>
   <p>This document outlines the specification of a model to convert an OWL 2 EL ontology to a Labeled Property Graph (LPG).
  </div>
  <h2 id="status">Status of this document</h2>
  <div>
   <p> This is a public copy of the editors’ draft. It is provided for discussion only and may change at any moment. Do not cite this document other than as work in progress. </p>
   <p></p>
  </div>
<nav id="toc">
  <h2>Table of Contents</h2>
  <ol class="toc" role="directory">
    <li><a href="#intro"><span class="secno">1</span> Introduction</a>
      <ol>
        <li><a href="#conventions"><span class="secno">1.1</span> Document Conventions</a>
        <li><a href="#requirements"><span class="secno">1.2</span> Main Requirements</a>
          <ol>
            <li><a href="#tooling-requirements"><span class="secno">1.2.1</span> Tooling Requirements</a>
            <li><a href="#basf-requirements"><span class="secno">1.2.2</span> BASF Use-Case Requirements</a>
          </ol>
        <li><a href="#design-choices"><span class="secno">1.3</span> Design Choices</a>
        <li><a href="#similar-models"><span class="secno">1.4</span> Similar Models</a>
      </ol>
    <li><a href="#owl2el"><span class="secno">2</span> Overview of OWL 2 EL</a>
      <ol>
        <li><a href="#owl2el-class-restrictions"><span class="secno">2.1</span> Supported Class Restrictions</a>
        <li><a href="#owl2el-axioms"><span class="secno">2.2</span> Supported Axioms</a>
        <li><a href="#owl2el-unsupported"><span class="secno">2.3</span> Unsupported Constructs</a>
      </ol>
    <li><a href="#owl2lpg"><span class="secno">3</span> Conversion of OWL to LPG</a>
      <ol>
        <li><a href="#class-axioms"><span class="secno">3.1</span> Class Axioms</a>
          <ol>
            <li><a href="#subclassof-axioms"><span class="secno">3.1.1</span> SubClassOf Axioms</a>
            <li><a href="#equivalent-classes-axioms"><span class="secno">3.1.2</span> EquivalentClasses Axioms</a>
            <li><a href="#subclassof-somevaluesfrom-axioms"><span class="secno">3.1.3</span> SubClassOf SomeValuesFrom Axioms</a>
            <li><a href="#equivalent-intersection-axioms"><span class="secno">3.1.4</span> EquivalentClasses IntersectionOf SomeValuesFrom Axioms</a>
            <li><a href="#subclassof-gci-axioms"><span class="secno">3.1.5</span> SubClassOf GCI Axioms</a>
            <li><a href="#disjoint-classes-axioms"><span class="secno">3.1.6</span> DisjointClasses Axioms</a>
            <li><a href="#subclassof-hasself-axioms"><span class="secno">3.1.7</span> SubClassOf HasSelf Axioms</a>
          </ol>
        <li><a href="#property-axioms"><span class="secno">3.2</span> Property Axioms</a>
          <ol>
            <li><a href="#subproperty-axioms"><span class="secno">3.2.1</span> SubPropertyOf Axioms</a>
            <li><a href="#property-chain-axioms"><span class="secno">3.2.2</span> PropertyChain Axioms</a>
            <li><a href="#transitive-property-axioms"><span class="secno">3.2.3</span> TransitiveProperty Axioms</a>
            <li><a href="#domain-axioms"><span class="secno">3.2.4</span> PropertyDomain (and Range) Axioms</a>
          </ol>
        <li><a href="#individual-axioms"><span class="secno">3.3</span> Individual Axioms</a>
          <ol>
            <li><a href="#class-assertion-axioms"><span class="secno">3.3.1</span> ClassAssertion Axioms</a>
            <li><a href="#object-property-assertion-axioms"><span class="secno">3.3.2</span> ObjectPropertyAssertion Axioms</a>
            <li><a href="#class-assertion-some-axioms"><span class="secno">3.3.3</span> ClassAssertion SomeValuesFrom Axioms</a>
            <li><a href="#same-individual-axioms"><span class="secno">3.3.4</span> SameIndividual Axioms</a>
            <li><a href="#different-individuals-axioms"><span class="secno">3.3.5</span> DifferentIndividuals Axioms</a>
          </ol>
        <li><a href="#annotation-axioms"><span class="secno">3.4</span> Annotation Axioms</a>
          <ol>
            <li><a href="#annotation-assertion-object-axioms"><span class="secno">3.4.1</span> AnnotationAssertion Axioms</a>
            <li><a href="#annotation-assertion-literal-axioms"><span class="secno">3.4.2</span> AnnotationAssertion Axioms with Language-Tagged Literals</a>
            <li><a href="#axiom-annotation-axioms"><span class="secno">3.4.3</span> Axiom Annotations</a>
            <li><a href="#nested-annotation-axioms"><span class="secno">3.4.4</span> Annotations on Annotations</a>
          </ol>
        <li><a href="#keys-axioms"><span class="secno">3.5</span> Keys</a>
        <li><a href="#punning-axioms"><span class="secno">3.6</span> Punning</a>
        <li><a href="#imports-axioms"><span class="secno">3.7</span> Ontology Imports</a>
        <li><a href="#multiple-axioms"><span class="secno">3.8</span> Example: Multiple Axioms</a>
      </ol>
    <li><a href="#change-history"><span class="secno">4</span> Representing Axiom Change History</a>
    <li><a href="#change-log"><span class="secno">A</span>Appendix: Change Log</a>
  </ol>
</nav>

<main>

<!-- INTRODUCTION -->
<h2 id="intro">
<span class="secno">1 </span> Introduction</h2>
  
  <p>This document specifies a model for converting OWL 2 EL axioms to a Labeled Property Graph (LPG) representation, and vice-versa.  While initially targeted to convert OWL 2 EL ontologies, the design of this model is intended to be extensible to OWL 2 axioms of arbitrary expressivity.</p>


<!-- CONVENTIONS -->
<h3 id="conventions">
<span class="secno">1.1 </span>Document conventions</h3>
  <p>OWL axioms are denoted using <a href="https://www.w3.org/TR/owl2-syntax" target="_blank">OWL Functional-Style syntax</a>.</p>

  <p>For succintness, the base prefix of OWL entities' IRIs is assumed to be <code>http://protege.stanford.edu/basf/</code>, and only denoted by the empty prefix ':' when we write out axioms.</p>

  <p class="note">For example, the entity with IRI <code> http://protege.stanford.edu/basf/A </code> is shortened to <code> :A </code> in axioms.</p>
  
  <p>This document is formatted according to the <a href="https://www.w3.org/StyleSheets/TR/2016/readme" target="_blank">W3C template for W3C Specifications</a>.


<!-- REQUIREMENTS -->
<h3 id="requirements">
<span class="secno">1.2 </span>Main Requirements</h3>

<p>In this section we lay out important requirements that drive the design of the OWL-LPG conversion model.</p>


<!-- WEBPROTEGE REQUIREMENTS -->
<h4 id="tooling-requirements"><span class="secno">1.2.1</span> Tooling Requirements</h4>

<p>Here we enumerate illustrative examples of the kinds of queries that should be both easily expressible (in <a href="https://neo4j.com/developer/cypher-query-language" target="_blank">Cypher</a>) and well performant for large knowledge bases. We use the <a href="https://webprotege.stanford.edu" target="_blank">WebProtégé cloud-based ontology editor</a> as the baseline for performance. The goal is to achieve a query performance that is superior to the performance of executing the same queries in WebProtégé 4.0 (non-LPG).</p>

Example queries:
<ol>
  <li>Get the axioms in a frame for class <code>A</code>.</li>
  <li>Get the axioms that mention <code>A</code>.</li>
  <li>Get the revisions for an ontology <code>O</code>.</li>
  <li>Get the revisions that alter the frame for <code>A</code>.</li>
  <li>Get the authors of changes to <code>A</code>.</li>
  <li>Get the last changes for <code>A</code>.</li>
  <li>Get the axioms in the latest revision of <code>O</code>.</li>
</ol>


<!-- BASF USE CASE REQUIREMENTS -->
<h4 id="basf-requirements"><span class="secno">1.2.2</span> BASF Use-Case Requirements</h4>

<p>...</p>


<!-- DESIGN CHOICES -->
<h3 id="design-choices">
<span class="secno">1.3 </span>Design Choices</h3>

<p>
  Our overarching design principle is to prioritize representational <b>consistency over convenience</b> (of query writing, of query response time, etc.). Below we describe in detail some key design choices, which serve to allow us to fulfil the requirements laid out in <a href="#requirements">Section 1.2</a>. 

  <dl class="switch">
    <dt>OWL axiom types are represented as nodes in the LPG model.</dt>
    <dd>When converted to the LPG model, every OWL axiom is modeled with a single node that denotes the axiom type. For example, <code>rdfs:SubClassOf</code> and <code>owl:EquivalentClasses</code> axiom types will each be represented by its own node. This decision allows two things to happen:
      <ol>
        <li>We can encode OWL axiom annotations in a manner that is consistent with our overall representation of OWL entity annotations (as nodes attached to the annotated-entity node).</li>
        <li>We can attach versioning information about the axiom, such as the ontology that contains the axiom, and details about the author, the date, and the number of the revision that last altered the axiom (see <a href="#change-history">Section 4</a> for full details).</li>
      </ol>
    </dd>

    <dt>In general, every resource that has an IRI is represented as a node in the LPG model.</dt>
    <dd>All OWL named entities are represented as nodes.</dd>

    <dt>OWL class expression types are represented as nodes in the LPG model.</dt>
    <dd>This follows from the previous design choice. For example, <code>owl:someValuesFrom</code> and <code>owl:intersectionOf</code> class expression types will each be represented by its own node.</dd>

    <dt id="duplicate-nodes">Nodes denoting OWL Classes, Individuals, and Datatypes are reused. Other nodes are duplicated to guarantee unambiguous round-tripping between OWL and LPG.</dt> 
    
    <dd>Upon converting from OWL to LPG, we <u>generally</u> reuse existing LPG nodes that denote OWL classes, individuals, and datatypes. The <u>exception</u> is when in the presence of General Concept Inclusion (GCI) axioms with a complex class expression as the subclass. In such cases, the nodes to represent the complex class expression in the subclass position of the GCI will not reuse existing nodes for the same entities in the LPG; they will be duplicated. We will duplicate all other nodes (e.g., OWL axiom types, OWL properties) as necessary to disambiguate how axioms should be parsed back from the LPG.</dd>

    <dd>For example, consider the axioms: <code>A SubClassOf p some B. A SubClassOf p some C. B SubClassOf D.</code> Here, the nodes for <code>A</code> and <code>B</code> would be reused, but the nodes for <code>SubClassOf, p,</code> and <code>some</code> would be duplicated. We duplicate the <code>SubClassOf</code> node (and generally, axiom type nodes) to be able to attach axiom annotations and versioning information on individual axioms. We duplicate the other nodes to prevent ambiguity about the structure of each axiom when parsing the LPG.</dd>

    <dd>The ability to parse OWL axioms from a LPG converted as specified here is guaranteed by the conditions that: 
      <ol>
        <li>every LPG node denoting an OWL class, individual, or datatype is followed by a node denoting an OWL axiom type; and </li>
        <li>nodes involved in a complex class expression in the subclass position of a GCI are duplicated (rather than reused) in the conversion.</li>
      </ol>
    </dd>

    <dd>The result of this design choice is illustrated in <a href="#multiple-axioms-lpg">Figure 24</a>.</dd>

    <dd>An alternative strategy to encode sufficient information about axiom structure to allow round-tripping is by: Maintaining one node for each unique OWL resource (one node per IRI); Assigning globally unique identifiers to axioms; and then either:
    		<ol type="a">
    			<li>naming edges with the axiom identifier, e.g., edge between <code>A</code> and <code>SubClassOf</code>, and so on; or</li>
    			<li>storing the axiom identifier in a key-value string property on the edges. As a consequence, we would potentially need to encode lists of axiom identifiers as values in string properties of LPGs.</li>
  			</ol>
    </dd>
  </dl>
</p>


<!-- SIMILAR MODELS -->
<h3 id="similar-models">
<span class="secno">1.4 </span>Similar Models</h3>
<p>In this section we compare and contrast the model described in this document with existing models to convert OWL ontologies to LPGs.</p>

<p><b>SciGraph</b>. The <a href="https://github.com/SciGraph/SciGraph/wiki/Neo4jMapping" target="_blank">SciGraph Neo4j Mapping</a> aims to support representing multiple ontologies as a Labeled Property Graph. SciGraph reads ontologies with the OWL API and converts them to a LPG. <em>SciGraph does not aim to support creating ontologies based on the LPG.</em> Below we outline and briefly describe the main differences between ours and the SciGraph model.
	<ul>
		<li><b>OWL axiom types are represented as edges in the LPG model.</b> In the SciGraph model, axiom types such as <code>rdfs:subClassOf</code> are encoded as edges between nodes that represent the left and the right hand side of the axiom. Axiom annotations are represented as key-value string properties on the edge that denotes the axiom type.  In our model, axiom types are represented as nodes, and therefore axiom annotations are represented uniformly like other annotation assertions.</li>

		<li><b>Annotation assertions are represented as key-value string properties in LPG model.</b> For example, <code>i:Individual {'rdfs:label' = 'Ruth'}</code>. As a consequence, annotations on annotations are not straightforwardly representable in SciGraph.</li>
		
		<li><b>Representation of source ontology in SciGraph is done both at the node and edge level.</b>  In the SciGraph model, nodes have an outgoing edge named <code>isDefinedBy</code> to a node of type <code>Ontology</code> that denotes the source ontology, and edges have a key-value string property to denote the source ontology IRI.  In our model, the source ontology of axioms will be encoded as a node connected to the nodes denoting the axiom types (e.g., <code>rdfs:SubClassOf, rdf:Type, owl:EquivalentClasses</code>).</li>
		
		<li><b>SciGraph represents OWL properties as both nodes and edges in the LPG model.</b> It represents OWL property types (functional, symmetric, etc.) as key-value properties on LPG <b>nodes</b> that represent the OWL properties (e.g., <code>hasSibling:ObjectProperty {'symmetric' = true}</code>).  And then SciGraph uses OWL properties as <b>edges</b> in axioms such as object property assertions (e.g., <code>rafael:Individual --hasSibling--> ruth:Individual</code>.  In our model, we consistently represent OWL properties as nodes. More, we represent OWL property types similarly to the RDF/XML serialization of OWL. E.g., <code>hasSibling --> rdf:type --> owl:SymmetricProperty</code>.</li>
	</ul>
</p>

<p><b>VirtualFlyBrain</b>. The <a href="https://github.com/VirtualFlyBrain/neo4j2owl" target="_blank">VirtualFlyBrain OWL 2 EL to Neo4J Mapping</a> allows importing "a well defined subset of OWL 2 EL ontologies into and export them from Neo4J, in such a way that entailments and annotations are preserved (not however the syntactic structure) in the ontology after the round-trip." The VirtualFlyBrain (VFB) model is explicit about its design goal of facilitating intuitive writing of Cypher queries. In that sense, VFB does not create "anonymous" nodes to represent axiom types or class expression types, and instead encodes these details on edges (relying on both edge names and key-value string properties on edges). 
<ul>
	<li><b>Object property names and axiom types are encoded as edge names.</b> For example, the axioms: <code>A SubClassOf B. A SubClassOf r some C</code> would be encoded in LPG as: <code>A--SubClassOf-->B. A--r-->B</code>. The restriction qualifiers (or quantifiers) are encoded as key-value properties on edges.</li>
	
	<li><b>The VFB model represents OWL properties as both nodes and edges.</b> Similar to SciGraph, OWL object properties are represented as edges, and then they are also represented as nodes to be able to express axioms such as annotations on those properties.</li>

	<li><b>Data and Annotation property assertions are represented as key-value string properties.</b> Also similar to SciGraph, both data and annotation property assertions are represented as key-value string properties on nodes. As a consequence, annotations on annotations are not straightforwardly representable in VFB.
</ul>
</p>

<p><b>OWL2Neo4J</b>. The <a href="https://github.com/flekschas/owl2neo4j" target="_blank">OWL2Neo4J tool</a> allows converting OWL ontologies to Labeled Property Graphs. The tool documentation states that it "only converts the class hierarchy; instances are ignored for now." Overall it is unclear what subset of the OWL language is supported, and whether round-tripping is feasible. This project looks defunct—it was last updated on September 2018.</p>


<!-- OWL 2 EL -->
<h2 id="owl2el">
<span class="secno">2 </span> Overview of OWL 2 EL</h2>
  <p>In this section we remind readers about <b>what is and what is not supported</b> in the OWL 2 EL profile. The remainder of this section is a verbatim copy of the <a href="https://www.w3.org/TR/owl2-profiles/#Feature_Overview" target="_blank">OWL 2 EL Feature Overview section in the OWL 2 Profiles Specification</a>.</p>

  <p>The OWL 2 EL profile is designed as a subset of OWL 2 that:
  <ul>
    <li>is particularly suitable for applications employing ontologies that define very large numbers of classes and/or properties,</li>
    <li>captures the expressive power used by many such ontologies, and</li>
    <li>for which ontology consistency, class expression subsumption, and instance checking can be decided in polynomial time.</li>
  </ul>
  For example, OWL 2 EL provides class constructors that are sufficient to express the very large biomedical ontology SNOMED CT.</p>


<!-- OWL 2 EL CLASS RESTRICTIONS -->
<h2 id="owl2el-class-restrictions"><span class="secno">2.1</span> Supported Class Restrictions</h2>

  <p>OWL 2 EL places restrictions on the type of class restrictions that can be used in axioms. In particular, the following types of class restrictions are supported:
  <ul>
    <li>existential quantification to a class expression (ObjectSomeValuesFrom) or a data range (DataSomeValuesFrom)</li>
    <li>existential quantification to an individual (ObjectHasValue) or a literal (DataHasValue)</li>
    <li>self-restriction (ObjectHasSelf)</li>
    <li>enumerations involving a single individual (ObjectOneOf) or a single literal (DataOneOf)</li>
    <li>intersection of classes (ObjectIntersectionOf) and data ranges (DataIntersectionOf)</li>
  </ul></p>


<!-- OWL 2 EL SUPPORTED AXIOMS -->
<h2 id="owl2el-axioms"><span class="secno">2.2</span> Supported Axioms</h2>
  <p>OWL 2 EL supports the following axioms, all of which are restricted to the allowed set of class expressions:

  <ul>
    <li>class inclusion (SubClassOf)</li>
    <li>class equivalence (EquivalentClasses)</li>
    <li>class disjointness (DisjointClasses)</li>
    <li>object property inclusion (SubObjectPropertyOf) with or without property chains, and data property inclusion (SubDataPropertyOf)</li>
    <li>property equivalence (EquivalentObjectProperties and EquivalentDataProperties),</li>
    <li>transitive object properties (TransitiveObjectProperty)</li>
    <li>reflexive object properties (ReflexiveObjectProperty)</li>
    <li>domain restrictions (ObjectPropertyDomain and DataPropertyDomain)</li>
    <li>range restrictions (ObjectPropertyRange and DataPropertyRange)</li>
    <li>assertions (SameIndividual, DifferentIndividuals, ClassAssertion, ObjectPropertyAssertion, DataPropertyAssertion, NegativeObjectPropertyAssertion, and NegativeDataPropertyAssertion)</li>
    <li>functional data properties (FunctionalDataProperty)</li>
    <li>keys (HasKey)</li>
  </ul></p>


<!-- OWL 2 EL UNSUPPORTED CONSTRUCTS -->
<h2 id="owl2el-unsupported"><span class="secno">2.3</span> Unsupported Constructs</h2>

  <p>The following constructs are not supported in OWL 2 EL:

  <ul>
    <li>universal quantification to a class expression (ObjectAllValuesFrom) or a data range (DataAllValuesFrom)</li>
    <li>cardinality restrictions (ObjectMaxCardinality, ObjectMinCardinality, ObjectExactCardinality, DataMaxCardinality, DataMinCardinality, and DataExactCardinality)</li>
    <li>disjunction (ObjectUnionOf, DisjointUnion, and DataUnionOf)</li>
    <li>class negation (ObjectComplementOf)</li>
    <li>enumerations involving more than one individual (ObjectOneOf and DataOneOf)</li>
    <li>disjoint properties (DisjointObjectProperties and DisjointDataProperties)</li>
    <li>irreflexive object properties (IrreflexiveObjectProperty)</li>
    <li>inverse object properties (InverseObjectProperties)</li>
    <li>functional and inverse-functional object properties (FunctionalObjectProperty and InverseFunctionalObjectProperty)</li>
    <li>symmetric object properties (SymmetricObjectProperty)</li>
    <li>asymmetric object properties (AsymmetricObjectProperty)</li>
  </ul></p>


<h2 id="owl2lpg">
<span class="secno">3 </span> Conversion of OWL to Labeled Property Graph</h2>
   <p>In this section we specify rules for converting OWL axioms and class expressions expressible in the OWL 2 EL profile to a labeled property graph.</p>

   <p id="color-scheme">
    Throughout this section we use the color scheme depicted below to denote the different types of OWL entities (left column) and other OWL resources (right column): types of axioms (e.g., <code>subClassOf, classAssertion</code>); types of class expressions (e.g., <code>someValuesFrom, intersectionOf</code>); literals; ontologies; and IRI resources.
    <figure><img src="images/color-legend.png" width="400px"></figure>
   </p>

   <!-- CLASS AXIOMS -->
   <h3 id="class-axioms"><span class="secno">3.1 </span> Class Axioms</h3>
   <p>OWL classes are represented as nodes in the LPG model.</p> 


   <!-- SubClassOf Axioms -->
   <h4 id="subclassof-axioms"><span class="secno">3.1.1 </span> SubClassOf Axioms</h4>
   
   <p class="example" id="example-subclassof"> SubClassOf( :A :B )</p>
   <figure>
    <img src="images/subclassof.png">
    <figcaption>Representation of OWL SubClassOf axioms in LPG model.</figcaption>
   </figure>


   <!-- EquivalentClasses Axioms -->
   <h4 id="equivalent-classes-axioms"><span class="secno">3.1.2 </span> EquivalentClasses Axioms</h4>
   <p>Given an <code>EquivalentClasses</code> axiom such as the one below, it would be semantically sufficient to represent it in a LPG using edges in just one direction. However, when querying the LPG, we would not be able to immediately determine that, say, <code>B</code> is equivalent to <code>A</code>. By having edges in both directions, like we have (succintly) depicted in the figure below, we can promptly find that <code>C</code> is equivalent to <code>B</code> as well as <code>A</code>.

   <p class="example" id="example-equivalent-classes"> EquivalentClasses( :A :B :C )</p>
   <figure>
    <p><img src="images/equivalent-classes.png"></p>
    <figcaption>Representation of OWL EquivalentClasses axioms in LPG model.</figcaption>
   </figure>


   <!-- SubClassOf with SomeValuesFrom restriction -->
   <h4 id="subclassof-somevaluesfrom-axioms"><span class="secno">3.1.3 </span> SubClassOf Axioms with SomeValuesFrom Restrictions</h4>

   <p class="example" id="example-subclassof-existential"> SubClassOf( :A ObjectSomeValuesFrom( :p :B ) )</p>
   <figure>
    <p><img src="images/subclassof-existential.png"></p>
    <figcaption>Representation of OWL SubClassOf axioms with SomeValuesFrom restrictions in LPG model.</figcaption>
   </figure>


   <!-- EquivalentClasses with IntersectionOf and SomeValuesFrom restrictions -->
   <h4 id="equivalent-intersection-axioms"><span class="secno">3.1.4 </span> EquivalentClasses Axioms with IntersectionOf and SomeValuesFrom Restrictions</h4>

   <p class="example" id="example-equivalent-intersection"> EquivalentClasses( :A ObjectIntersectionOf( :C ObjectSomeValuesFrom( :p :B )))</p>
   <figure>
    <p><img src="images/equivalent-intersection.png"></p>
    <figcaption>Representation of OWL EquivalentClasses axioms with IntersectionOf and SomeValuesFrom restrictions in LPG model.</figcaption>
   </figure>


   <!-- SubClassOf GCI -->
   <h4 id="subclassof-gci-axioms"><span class="secno">3.1.5 </span> SubClassOf GCI Axioms</h4>

   <p class="example" id="example-subclassof-gci"> SubClassOf(ObjectSomeValuesFrom( :p :A ) ObjectSomeValuesFrom( :r :B ))</p>
   <figure>
    <p><img src="images/subclassof-gci.png"></p>
    <figcaption>Representation of OWL SubClassOf General Concept Inclusion (GCI) axioms in LPG model.</figcaption>
   </figure>


   <!-- Disjoint Classes -->
   <h4 id="disjoint-classes-axioms"><span class="secno">3.1.6 </span> DisjointClasses Axioms</h4>

   <p class="example" id="example-disjoint-classes"> DisjointClasses( :A :B :C )</p>
   <figure>
    <p><img src="images/disjoint-classes.png"></p>
    <figcaption>Representation of OWL DisjointClasses axioms in LPG model.</figcaption>
   </figure>


   <!-- SubClassOf with HasSelf restriction -->
   <h4 id="subclassof-hasself-axioms"><span class="secno">3.1.6 </span> SubClassOf Axioms with HasSelf Restrictions</h4>

   <p class="example"> SubClassOf( :A ObjectHasSelf( :p ) )</p>
   <figure>
    <p><img src="images/subclassof-hasself.png"></p>
    <figcaption>Representation of OWL SubClassOf axioms with HasSelf restrictions in LPG model.</figcaption>
   </figure>



  <!-- PROPERTY AXIOMS -->
  <h3 id="property-axioms"><span class="secno">3.2 </span> Property Axioms</h3>
  
  <p>OWL object, data, and annotation properties are represented as nodes in the LPG model.</p>
  

   <!-- SubPropertyOf Axioms -->
   <h4 id="subproperty-axioms"><span class="secno">3.2.1 </span> SubPropertyOf Axioms</h4>

   <p class="example" id="example-subpropertyof"> SubObjectPropertyOf( :p :r )</p>
   <figure>
    <img src="images/subpropertyof.png">
    <figcaption>Representation of OWL SubPropertyOf axioms in LPG model.</figcaption>
   </figure>

   <p class="note"><span class="marker">Note:</span>The same strategy applies for <b>SubDataPropertyOf</b> and <b>SubAnnotationPropertyOf</b> axioms.</p>


   <!-- ObjectPropertyChain Axioms -->
   <h4 id="property-chain-axioms"><span class="secno">3.2.2 </span> PropertyChain Axioms</h4>

   <p class="example" id="example-objectpropertychain"> SubObjectPropertyOf( ObjectPropertyChain( :p :q ) :r ) </p>
   <figure>
    <img src="images/object-property-chain.png">
    <figcaption>Representation of OWL SubPropertyOf axioms with ObjectPropertyChain restrictions in LPG model.</figcaption>
   </figure>


   <!-- TransitiveObjectProperty Axioms -->
   <h4 id="transitive-property-axioms"><span class="secno">3.2.3 </span> TransitiveProperty Axioms</h4>

   <p class="example" id="example-equivalent-intersection"> TransitiveObjectProperty( :p )</p>
   <figure>
    <p><img src="images/transitive-object-property.png"></p>
    <figcaption>Representation of OWL TransitiveObjectProperty axioms in LPG model.</figcaption>
   </figure>

   <p class="note"><span class="marker">Note:</span>The same strategy applies for other OWL property characteristics (e.g., symmetric properties).</p>


   <!-- Domain and Range -->
   <h4 id="domain-axioms"><span class="secno">3.2.4 </span> PropertyDomain (and Range) Axioms</h4>

   <p class="example" id="example-domain"> ObjectPropertyDomain( :p :A )</p>
   <figure>
    <p><img src="images/domain.png"></p>
    <figcaption>Representation of OWL property Domain axioms.</figcaption>
   </figure>

   <p class="note"><span class="marker">Note:</span><b>ObjectPropertyRange</b> axioms are represented similarly, by just swapping the <code>objectPropertyDomain</code> node by the <code>objectPropertyRange</code> node. The same strategy applies for <b>dataPropertyDomain</b>, <b>dataPropertyRange</b>, <b>annotationPropertyDomain</b>, and <b>annotationPropertyRange</b> axioms.</p>



  <!-- INDIVIDUAL AXIOMS -->
  <h3 id="individual-axioms"><span class="secno">3.3 </span> Individual Axioms</h3>
  
  <p>OWL individuals are represented as nodes in the LPG model.</p>


   <!-- ClassAssertion Axioms -->
   <h4 id="class-assertion-axioms"><span class="secno">3.3.1 </span> ClassAssertion Axioms</h4>

   <p class="example" id="example-class-assertion"> ClassAssertion( :A :i )</p>
   <figure>
    <img src="images/class-assertion.png">
    <figcaption>Representation of OWL ClassAssertion axioms in LPG model.</figcaption>
   </figure>


   <!-- ObjectPropertyAssertion Axioms -->
   <h4 id="object-property-assertion-axioms"><span class="secno">3.3.2 </span> ObjectPropertyAssertion Axioms</h4>

   <p class="example" id="example-object-property-assertion"> ObjectPropertyAssertion( :p :i :j )</p>
   <figure>
    <img src="images/object-property-assertion.png">
    <figcaption>Representation of OWL ObjectPropertyAssertion axioms in LPG model.</figcaption>
   </figure>


   <!-- ClassAssertion with SomeValuesFrom restriction -->
   <h4 id="class-assertion-some-axioms"><span class="secno">3.3.3 </span> ClassAssertion Axioms with SomeValuesFrom Restrictions</h4>

   <p class="example" id="example-class-assertion-some"> ClassAssertion( ObjectSomeValuesFrom( :p :A ) :i )</p>
   <figure>
    <img src="images/class-assertion-existential.png">
    <figcaption>Representation of OWL ClassAssertion axioms with SomeValuesFrom restrictions in LPG model.</figcaption>
   </figure>


   <!-- SameIndividual Axioms -->
   <h4 id="same-individual-axioms"><span class="secno">3.3.4 </span> SameIndividual Axioms</h4>

   <p class="example"> SameIndividual( :i :j )</p>
   <figure>
    <img src="images/same-individual.png">
    <figcaption>Representation of OWL SameIndividual axioms in LPG model.</figcaption>
   </figure>


   <!-- DifferentIndividuals Axioms -->
   <h4 id="different-individuals-axioms"><span class="secno">3.3.5 </span> DifferentIndividuals Axioms</h4>

   <p class="example"> DifferentIndividuals( :i :j :k )</p>
   <figure>
    <img src="images/different-individuals.png">
    <figcaption>Representation of OWL DifferentIndividuals axioms in LPG model.</figcaption>
   </figure>



  <!-- ANNOTATION AXIOMS -->
  <h3 id="annotation-axioms"><span class="secno">3.4 </span> Annotation Axioms</h3>
  
  <p>OWL annotation properties, the subject and object IRIs of annotation assertions, OWL 2 datatypes, and literals are all represented as nodes in the LPG model. Axiom annotations are represented using an edge named <code>axiomAnnotation</code> from the <code>annotationAssertion</code> axiom node to the annotation property node (see <a href="#axiom-annotation-axioms">Section 3.4.3</a>). Naming the edge corresponding to axiom annotations is necessary to differentiate axiom annotations from other annotations, particularly in cases such as annotations on annotations (see <a href="#nested-annotation-axioms">Section 3.4.4</a>).</p>


   <!-- AnnotationAssertion Axioms with IRIs -->
   <h4 id="annotation-assertion-object-axioms"><span class="secno">3.4.1 </span> AnnotationAssertion Axioms</h4>

   <p class="example" id="example-annotation-assertion-object"> AnnotationAssertion( :p :i :j )</p>
   <figure>
    <img src="images/annotation-assertion-iri.png">
    <figcaption>Representation of OWL AnnotationAssertion axioms with IRIs as objects in LPG model.</figcaption>
   </figure>


   <!-- AnnotationAssertion Axioms with Literals -->
   <h4 id="annotation-assertion-literal-axioms"><span class="secno">3.4.2 </span> AnnotationAssertion Axioms with Language-Tagged Literals</h4>

   <p class="example" id="example-annotation-assertion-literal"> AnnotationAssertion( :p :i "foo"@en )</p>
   <figure>
    <img src="images/annotation-assertion-literal.png">
    <figcaption>Representation of OWL ClassAssertion axioms with literals as objects in LPG model.</figcaption>
   </figure>


  <!-- Axiom Annotations -->
  <h4 id="axiom-annotation-axioms"><span class="secno">3.4.3 </span> Axiom Annotations</h4>

   <p class="example" id="example-axiom-annotation"> SubClassOf( Annotation( :p "foo"^^xsd:string ) :A :B) )</p>
   <figure>
    <img src="images/axiom-annotation.png">
    <figcaption>Representation of annotated OWL axioms in LPG model.</figcaption>
   </figure>


   <!-- Annotations on Annotations -->
   <h4 id="nested-annotation-axioms"><span class="secno">3.4.4 </span> Annotations on Annotations</h4>
   <p class="example" id="example-nested-annotations"> AnnotationAssertion( Annotation( :q "bar"@en ) :p :i :j )</p>
   <figure>
     <img src="images/nested-annotations.png">
     <figcaption>Representation of OWL annotations on annotations in LPG model.</figcaption>
   </figure>


  <!-- KEYS -->
  <h3 id="keys-axioms"><span class="secno">3.5 </span> Keys</h3>

   <p class="example" id="example-keys-axioms"> HasKey( :A ( :r ) () )</p>
   <figure>
    <img src="images/keys.png">
    <figcaption>Representation of OWL keys axioms in LPG model.</figcaption>
   </figure>


  <!-- PUNNING -->
  <h3 id="punning-axioms"><span class="secno">3.6 </span> Punning</h3>

   <p class="example"> ObjectPropertyAssertion( :p :i :j )</p>
   <p class="example"> SubClassOf( :i :K )</p>
   <figure>
    <img src="images/axiom-punning.png">
    <figcaption>Representation of OWL punning in LPG model.</figcaption>
   </figure>


  <!-- ONTOLOGY IMPORTS -->
  <h3 id="imports-axioms"><span class="secno">3.7 </span> Ontology Imports</h3>

   <p class="example" id="example-imports-axioms"> Ontology( :O Import ( :T ) )</p>
   <figure>
    <img src="images/ontology-import.png">
    <figcaption>Representation of OWL ontology imports axioms in LPG model.</figcaption>
   </figure>



  <!-- MULTIPLE AXIOMS EXAMPLE -->
  <h3 id="multiple-axioms"><span class="secno">3.8 </span> Multiple Axioms Example</h3>

  This section exemplifies how the axiom conversions specified above would concretize for a set of axioms. Given the following axioms, the resulting LPG is depicted in <a href="#multiple-axioms-lpg">the figure below</a>.

   <p class="example"> EquivalentClasses( :A :E )</p>
   <p class="example"> SubClassOf(<br><span class="indent">Annotation( dc:date "2020-02-25T21:20:36"^^xsd:dateTime )</span><br><span class="indent">:A :C )</span></p>
   <p class="example"> SubClassOf(<br><span class="indent">Annotation( dc:date "2020-02-25T21:32:52"^^xsd:dateTime )</span><br><span class="indent">:A ObjectSomeValuesFrom( :p :D ))</span></p>
   <p class="example"> AnnotationAssertion( skos:definition :B "foo."@en )</p>
   <p class="example"> SubClassOf(<br><span class="indent">Annotation( dc:creator :mhorridge )</span><br><span class="indent">:B ObjectIntersectionOf( :A ObjectSomeValuesFrom( :p :F )))</span></p>
   <p class="example"> ObjectPropertyAssertion(<br><span class="indent">Annotation( dc:creator :rsgoncalves )</span><br><span class="indent">:w :mhorridge :stanfordUniversity )</span></p>
   <p class="example"> ObjectPropertyAssertion( :w :rsgoncalves :stanfordUniversity )</p>
   <figure id="multiple-axioms-lpg">
    <img src="images/multiple-axioms.png">
    <figcaption>Representation of multiple OWL axioms in LPG model.</figcaption>
   </figure>



<!-- AXIOM CHANGE HISTORY -->
<h2 id="change-history">
<span class="secno">4 </span> Representing OWL Axiom Change History in a LPG</h2>

  <p class="example" id="example-change-history"> AddAxiom( SubClassOf( :A :B ), branch B, ontology O ) </p>
  <figure>
  <img src="images/axiom-history.png">
  <figcaption>Representation of OWL axiom change history in LPG model.</figcaption>
  </figure>


<hr>


<!-- DOCUMENT CHANGE HISTORY -->
<h2 class="no-num heading settled" id="change-log">Appendix: Change Log</h2>
  In this section we record all major changes to the document, in reverse chronological order.

  <dl>
  <dt><code>February 27, 2020</code></dt>
  <dd>Added section <a href="#subclassof-hasself-axioms">SubClassOf Axioms with HasSelf Restrictions</a>.</dd>
  <dd>Added section <a href="#same-individual-axioms">SameIndividual Axioms</a>.</dd>
  <dd>Added section <a href="#different-individuals-axioms">DifferentIndividuals Axioms</a>.</dd>
  <dd>Added section <a href="#keys-axioms">Keys Axioms</a>.</dd>
  <dd>Added section <a href="#disjoint-axioms">DisjointClasses Axioms</a>.</dd>

  <dt><code>February 26, 2020</code></dt>
  <dd>Modified section <a href="#design-choices">Design Choices</a> to clarify the decision on <a href="#duplicate-nodes">node duplication</a>.</dd>
  <dd>Updated section <a href="#multiple-axioms">Multiple Axioms</a>.</dd>
  <dd>Added paragraph <a href="#color-scheme">Color Scheme</a>.</dd>
  <dd>Updated all diagrams with the <a href="#color-scheme">new color coding scheme</a>.</dd>

  <dt><code>February 25, 2020</code></dt>
  <dd>Added section <a href="#multiple-axioms">Multiple Axioms</a>.</dd>

	<dt><code>February 21, 2020</code></dt>
	<dd>Extended section <a href="#design-choices">Design Choices</a> to clarify the decision on <a href="#duplicate-nodes">node duplication</a>.</dd>
	<dd>Added section <a href="#imports-axioms">Ontology Imports</a>.</dd>

	<dt><code>February 20, 2020</code></dt>
	<dd>Extended section <a href="#design-choices">Design Choices</a>.</dd>
	<dd>Added section <a href="#similar-models">Similar Models</a>.</dd>
	<dd>Added section <a href="#nested-annotation-axioms">Annotations on annotations</a>.</dd>
	<dd>Added source control link to <a href="https://github.com/protegeproject/owl2lpg">GitHub repository for this specification</a>.</dd>

    <dt><code>February 14, 2020</code></dt>
    <dd>Added section <a href="#change-history">Representing OWL axiom change history</a>.</dd>
    <dd>Added section <a href="#tooling-requirements">Tooling Requirements</a>.</dd>
    <dd>Added this section to track the document's changes.</dd>
    <dd>Modified strategy to represent property assertions: The axiom type node now follows the node of the subject of the assertion. This is consistent with the representation of other axiom types, and allows unambiguous re-construction of the assertion when the subject is involved in other axioms.</dd>

    <dt><code>February 13, 2020</code></dt>
    <dd>Modified strategy to represent literals. See <a href="#axiom-annotation-axioms">Axiom Annotations</a> and <a href="#annotation-assertion-literal-axioms">Annotation Assertion</a> sections.</dd>
    <dd>Added section <a href="#design-choices">Design Choices</a>.</dd>
    <dd>Added section <a href="#domain-axioms">PropertyDomain (and Range) axioms</a>.</dd>
    <dd>Added section <a href="#punning-axioms">Punning</a>.</dd>
  </dl>


<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>